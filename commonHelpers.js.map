{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n});\n\nexport const gallery = document.querySelector('ul.gallery');\n\nexport function renderImgs(images) {\n\n  const imgGallery = images.hits\n    .map(\n      image => `<li class=\"img-blok\">\n        <a href=\"${image.largeImageURL}\">     \n          <img  src=\"${image.webformatURL}\"\n            data-source=\"${image.largeImageURL}\"\n            alt=\"${image.tags}\">\n          <ul class=\"image-descript\">\n            <li>\n              <h3>likes</h3>\n              <p>${image.likes}</p>\n            </li>\n            <li>\n              <h3>views</h3>\n              <p>${image.views}</p>\n            </li>\n            <li>\n              <h3>comments</h3>\n              <p>${image.comments}</p>\n            </li>\n            <li>\n              <h3>downloads</h3>\n              <p>${image.downloads}</p>\n            </li>\n          </ul>\n        </a>\n      </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', imgGallery);\n\n  lightbox.refresh();\n}","import axios from \"axios\";\n\nexport async function fetchImg(searchQuery, page) {\n  const searchParams = new URLSearchParams({\n    key: '43032026-51d5efc66afaddf8a06e125fe',\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n    page,\n  });\n\n  const BASE_URL = \"https://pixabay.com\";\n  const ENDPOINT = \"/api/\";\n  const url = `${BASE_URL}${ENDPOINT}?${searchParams}`;\n\n  const {data} = await axios(url);\n  return data;\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { renderImgs, gallery } from './js/render-functions';\nimport { fetchImg } from './js/pixabay-api';\n\nconst form = document.querySelector('form');\nconst flowerSpinner = document.querySelector('.flower-spinner');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet searchQuery = '';\n\nconst showLoader = () => {\n  flowerSpinner.style.display = 'flex';\n};\n\nconst hideLoader = () => {\n  flowerSpinner.style.display = 'none';\n};\n\nconst handleFormSubmit = async (event) => {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  currentPage = 1;\n\n  searchQuery = event.currentTarget.elements.query.value.trim();\n\n  if (!searchQuery) {\n    iziToast.error({\n      color: 'yellow',\n      message: ` Please fill in the field for search query.`,\n      position: 'topRight',\n    });\n    return;\n  }\n\n  showLoader();\n  try {\n    const images = await fetchImg(searchQuery, currentPage);\n    if (images.hits.length === 0) {\n          iziToast.error({\n      color: 'red',\n      message: \"Sorry, there are no images matching your search query. Please try again!\",\n      position: 'topRight',      \n    });\n      return;\n    }\n    renderImgs(images);\n\n    if (images.totalHits > 15) {\n      loadMoreBtn.style.display = \"block\";\n    }\n  } catch (error) {\n    iziToast.error({\n      color: 'red',\n      message: `❌ Sorry, there was a mistake. Please try again!`,\n      position: 'topRight',      \n    });\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n}\n\nform.addEventListener('submit', handleFormSubmit);\n\nconst handleLoadMore = async (event) => {\n\n  currentPage += 1;\n\n  showLoader();\n\n  try {\n    const images = await fetchImg(searchQuery, currentPage);\n    const totalPages = Math.ceil(images.totalHits / 15);\n    renderImgs(images);\n    smoothScroll();\n    if (currentPage === totalPages) {\n      loadMoreBtn.style.display = \"none\";\n      iziToast.info({\n        color: \"yellow\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      })\n    }\n\n  } catch (error) {\n  \n    iziToast.error({\n      color: 'red',\n      message: `❌ Sorry, there was a mistake. Please try again!`,\n      position: 'topRight',      \n    });\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n}\n\nloadMoreBtn.addEventListener(\"click\", handleLoadMore);\n \nfunction smoothScroll() {\n    const { height } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n  top: height * 2,\n  behavior: \"smooth\",\n});\n\n}"],"names":["lightbox","SimpleLightbox","gallery","renderImgs","images","imgGallery","image","fetchImg","searchQuery","page","url","data","axios","form","flowerSpinner","loadMoreBtn","currentPage","showLoader","hideLoader","handleFormSubmit","event","iziToast","handleLoadMore","totalPages","smoothScroll","height"],"mappings":"+vBAMA,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,KAChB,CAAC,EAEYC,EAAU,SAAS,cAAc,YAAY,EAEnD,SAASC,EAAWC,EAAQ,CAEjC,MAAMC,EAAaD,EAAO,KACvB,IACCE,GAAS;AAAA,mBACIA,EAAM,aAAa;AAAA,uBACfA,EAAM,YAAY;AAAA,2BACdA,EAAM,aAAa;AAAA,mBAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,mBAIVA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,mBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,mBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,mBAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,YAK7B,EACA,KAAK,EAAE,EAEVJ,EAAQ,mBAAmB,YAAaG,CAAU,EAElDL,EAAS,QAAO,CAClB,CC7CO,eAAeO,EAASC,EAAaC,EAAM,CAahD,MAAMC,EAAM,4BAZS,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAAC,CACJ,CAAG,CAIiD,GAE5C,CAAC,KAAAE,CAAI,EAAI,MAAMC,EAAMF,CAAG,EAC9B,OAAOC,CACT,CCbA,MAAME,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAc,EACdR,EAAc,GAElB,MAAMS,EAAa,IAAM,CACvBH,EAAc,MAAM,QAAU,MAChC,EAEMI,EAAa,IAAM,CACvBJ,EAAc,MAAM,QAAU,MAChC,EAEMK,EAAmB,MAAOC,GAAU,CAOxC,GANAA,EAAM,eAAc,EACpBlB,EAAQ,UAAY,GACpBc,EAAc,EAEdR,EAAcY,EAAM,cAAc,SAAS,MAAM,MAAM,OAEnD,CAACZ,EAAa,CAChBa,EAAS,MAAM,CACb,MAAO,SACP,QAAS,8CACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDJ,IACA,GAAI,CACF,MAAMb,EAAS,MAAMG,EAASC,EAAaQ,CAAW,EACtD,GAAIZ,EAAO,KAAK,SAAW,EAAG,CACxBiB,EAAS,MAAM,CACnB,MAAO,MACP,QAAS,2EACT,SAAU,UAChB,CAAK,EACC,MACD,CACDlB,EAAWC,CAAM,EAEbA,EAAO,UAAY,KACrBW,EAAY,MAAM,QAAU,QAE/B,MAAe,CACdM,EAAS,MAAM,CACb,MAAO,MACP,QAAS,kDACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRH,IACAL,EAAK,MAAK,CACX,CACH,EAEAA,EAAK,iBAAiB,SAAUM,CAAgB,EAEhD,MAAMG,EAAiB,MAAOF,GAAU,CAEtCJ,GAAe,EAEfC,IAEA,GAAI,CACF,MAAMb,EAAS,MAAMG,EAASC,EAAaQ,CAAW,EAChDO,EAAa,KAAK,KAAKnB,EAAO,UAAY,EAAE,EAClDD,EAAWC,CAAM,EACjBoB,IACIR,IAAgBO,IAClBR,EAAY,MAAM,QAAU,OAC5BM,EAAS,KAAK,CACZ,MAAO,SACP,QAAS,6DACT,SAAU,UAClB,CAAO,EAGJ,MAAe,CAEdA,EAAS,MAAM,CACb,MAAO,MACP,QAAS,kDACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRH,IACAL,EAAK,MAAK,CACX,CACH,EAEAE,EAAY,iBAAiB,QAASO,CAAc,EAEpD,SAASE,GAAe,CACpB,KAAM,CAAE,OAAAC,CAAQ,EAAGvB,EAAQ,kBAAkB,sBAAqB,EAClE,OAAO,SAAS,CAClB,IAAKuB,EAAS,EACd,SAAU,QACZ,CAAC,CAED"}